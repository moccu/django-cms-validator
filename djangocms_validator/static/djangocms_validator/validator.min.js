window.CMSValidator=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.find=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.apply(null,e.querySelectorAll(t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Validator=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0);var a={rules:[],selectors:{publish:".cms-btn-publish"},labels:{layerTitle:"Errors found",layerCheckboxLabel:"I want to publish the site..."},templates:{layer:function(t){var e=t.errors,r=t.options;return"\n\t\t\t\t\t<p>"+r.labels.layerTitle+"</p>\n\t\t\t\t\t<ul>"+e.forEach(function(t){return"<li>"+t.message+"</li>"})+'</ul>\n\t\t\t\t\t<label for="cms-validator-ignore">\n\t\t\t\t\t\t<input type="checkbox" name="cms-validator-ignore" id="cms-validator-ignore" value="ignore" />\n\t\t\t\t\t\t<span>'+r.labels.layerCheckboxLabel+"</span>\n\t\t\t\t\t</label>\n\t\t\t\t"}}};e.Validator=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=n({},a,e),this._layer=null}return i(t,[{key:"setup",value:function(){var t=this;return this._onPublish=this._onPublish.bind(this),this._publish=(0,o.find)(this.options.selectors.publish),this._publish.forEach(function(e){return e.addEventListener("click",t._onPublish,!0)}),this}},{key:"validate",value:function(){var t=this,e=[];return this.options.rules.forEach(function(r){var n=new r(t.options);e=e.concat(n.test())}),e}},{key:"_buildLayer",value:function(t,e){var r=document.createElement("div"),n=this.options;return r.className="cms-validation-layer",r.innerHTML=this.options.templates.layer({errors:e,options:n}),t.className+=" cms-validation-layer-container",t.appendChild(r),{container:r,checkbox:r.getElementsByTagName("input")[0]}}},{key:"_onPublish",value:function(t){var e=this.validate(),r=t.currentTarget.parentElement;if(0!==e.length){if(this._layer){if(this._layer.checkbox.checked)return;r.removeChild(this._layer.container)}t.stopImmediatePropagation(),t.preventDefault(),this._layer=this._buildLayer(r,e)}}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.rules=[]},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Validator=e.rules=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(2)),i=r(1);e.rules=n,e.Validator=i.Validator}]);